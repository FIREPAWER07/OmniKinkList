<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KinkList - Modern Preference Explorer</title>
    <link rel="stylesheet" href="styles/theme.css">
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <button class="theme-toggle" id="theme-toggle" title="Toggle theme">
        <span id="theme-icon">üåô</span>
    </button>

    <div class="container">
        <div class="header">
            <div class="header-content">
                <h1>KinkList Explorer</h1>
                <p>A modern, accessible tool for exploring and expressing your preferences</p>
            </div>
            <div class="header-graphic">
                <div class="graphic-circle"></div>
                <div class="graphic-circle"></div>
                <div class="graphic-circle"></div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h2>Get Started</h2>
                <p>Choose how you'd like to begin your exploration</p>
            </div>
            <div class="card-content">
                <div class="controls">
                    <input type="file" id="import-file" accept=".json" style="display: none;">
                    <button class="btn btn-secondary" id="import-button">
                        <span class="btn-icon">üì§</span>
                        Import Existing Preferences
                    </button>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h2>Choose Your List Type</h2>
                <p>Select the version that best fits your needs</p>
            </div>
            <div class="card-content">
                <div class="list-selector">
                    <button class="list-type-btn" data-type="classic">
                        <span class="list-icon">üîç</span>
                        <strong>Classic</strong>
                        <small>Simple, essential categories</small>
                    </button>
                    <button class="list-type-btn" data-type="detailed">
                        <span class="list-icon">üìã</span>
                        <strong>Detailed</strong>
                        <small>Comprehensive with descriptions</small>
                    </button>
                    <button class="list-type-btn" data-type="extended">
                        <span class="list-icon">üåê</span>
                        <strong>Extended</strong>
                        <small>Complete with all options</small>
                    </button>
                </div>
            </div>
        </div>

        <div class="preference-legend">
            <h3>Preference Guide</h3>
            <div class="legend-items">
                <div class="legend-item">
                    <span class="legend-color pref-favorite"></span>
                    <span class="legend-label">Favorite</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color pref-like"></span>
                    <span class="legend-label">Like</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color pref-indifferent"></span>
                    <span class="legend-label">Indifferent</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color pref-maybe"></span>
                    <span class="legend-label">Maybe</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color pref-limit"></span>
                    <span class="legend-label">Limit</span>
                </div>
            </div>
        </div>
    </div>

    <script src="scripts/shared.js"></script>
    <script src="scripts/storage.js"></script>
    <script>
        // Initialize theme
        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                document.body.classList.add('dark');
                document.getElementById('theme-icon').textContent = '‚òÄÔ∏è';
            }
        }

        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.getElementById('theme-icon');
            
            if (body.classList.contains('dark')) {
                body.classList.remove('dark');
                themeIcon.textContent = 'üåô';
                localStorage.setItem('theme', 'light');
            } else {
                body.classList.add('dark');
                themeIcon.textContent = '‚òÄÔ∏è';
                localStorage.setItem('theme', 'dark');
            }
        }

        document.getElementById('theme-toggle').addEventListener('click', toggleTheme);

        // List selection
        document.querySelectorAll('.list-type-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const listType = e.currentTarget.dataset.type;
                localStorage.setItem('selectedListType', listType);
                window.location.href = 'kinklist.html';
            });
        });

        // Import functionality
        document.getElementById('import-button').addEventListener('click', () => {
            document.getElementById('import-file').click();
        });

        document.getElementById('import-file').addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const data = JSON.parse(e.target.result);
                    if (data.preferences && data.listType) {
                        localStorage.setItem('selectedListType', data.listType);
                        localStorage.setItem('kinklist-preferences', JSON.stringify(data.preferences));
                        window.location.href = 'kinklist.html';
                    } else {
                        alert('Invalid file format');
                    }
                } catch (error) {
                    alert('Error reading file: ' + error.message);
                }
            };
            reader.readAsText(file);
        });

        // Initialize
        initTheme();
    </script>
</body>
</html>